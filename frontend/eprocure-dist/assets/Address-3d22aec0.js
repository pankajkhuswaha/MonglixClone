import{a as U,g as G,s as A,aB as Y,_ as y,b as L,r as m,u as H,d as Q,p as X,j as e,h as Z,b6 as J,b7 as K,aR as ee,ak as w,aC as te,aP as ae,b8 as se,aH as F,b9 as M,ba as I,bb as ne,ao as oe,aT as ie,aq as le,bc as re}from"./index-058e87a5.js";import{C as de}from"./CircularProgress-be90e837.js";function ce(a){return G("MuiLoadingButton",a)}const me=U("MuiLoadingButton",["root","loading","loadingIndicator","loadingIndicatorCenter","loadingIndicatorStart","loadingIndicatorEnd","endIconLoadingEnd","startIconLoadingStart"]),c=me,ue=["children","disabled","id","loading","loadingIndicator","loadingPosition","variant"],xe=a=>{const{loading:t,loadingPosition:n,classes:o}=a,u={root:["root",t&&"loading"],startIcon:[t&&`startIconLoading${L(n)}`],endIcon:[t&&`endIconLoading${L(n)}`],loadingIndicator:["loadingIndicator",t&&`loadingIndicator${L(n)}`]},i=Z(u,ce,o);return y({},o,i)},pe=a=>a!=="ownerState"&&a!=="theme"&&a!=="sx"&&a!=="as"&&a!=="classes",ge=A(Y,{shouldForwardProp:a=>pe(a)||a==="classes",name:"MuiLoadingButton",slot:"Root",overridesResolver:(a,t)=>[t.root,t.startIconLoadingStart&&{[`& .${c.startIconLoadingStart}`]:t.startIconLoadingStart},t.endIconLoadingEnd&&{[`& .${c.endIconLoadingEnd}`]:t.endIconLoadingEnd}]})(({ownerState:a,theme:t})=>y({[`& .${c.startIconLoadingStart}, & .${c.endIconLoadingEnd}`]:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},a.loadingPosition==="center"&&{transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),[`&.${c.loading}`]:{color:"transparent"}},a.loadingPosition==="start"&&a.fullWidth&&{[`& .${c.startIconLoadingStart}, & .${c.endIconLoadingEnd}`]:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0,marginRight:-8}},a.loadingPosition==="end"&&a.fullWidth&&{[`& .${c.startIconLoadingStart}, & .${c.endIconLoadingEnd}`]:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0,marginLeft:-8}})),he=A("span",{name:"MuiLoadingButton",slot:"LoadingIndicator",overridesResolver:(a,t)=>{const{ownerState:n}=a;return[t.loadingIndicator,t[`loadingIndicator${L(n.loadingPosition)}`]]}})(({theme:a,ownerState:t})=>y({position:"absolute",visibility:"visible",display:"flex"},t.loadingPosition==="start"&&(t.variant==="outlined"||t.variant==="contained")&&{left:t.size==="small"?10:14},t.loadingPosition==="start"&&t.variant==="text"&&{left:6},t.loadingPosition==="center"&&{left:"50%",transform:"translate(-50%)",color:(a.vars||a).palette.action.disabled},t.loadingPosition==="end"&&(t.variant==="outlined"||t.variant==="contained")&&{right:t.size==="small"?10:14},t.loadingPosition==="end"&&t.variant==="text"&&{right:6},t.loadingPosition==="start"&&t.fullWidth&&{position:"relative",left:-10},t.loadingPosition==="end"&&t.fullWidth&&{position:"relative",right:-10})),be=m.forwardRef(function(t,n){const o=H({props:t,name:"MuiLoadingButton"}),{children:u,disabled:i=!1,id:f,loading:d=!1,loadingIndicator:p,loadingPosition:g="center",variant:h="text"}=o,b=Q(o,ue),r=X(f),N=p??e.jsx(de,{"aria-labelledby":r,color:"inherit",size:16}),l=y({},o,{disabled:i,loading:d,loadingIndicator:N,loadingPosition:g,variant:h}),v=xe(l),j=d?e.jsx(he,{className:v.loadingIndicator,ownerState:l,children:N}):null;return e.jsxs(ge,y({disabled:i||d,id:r,ref:n},b,{variant:h,classes:v,ownerState:l,children:[l.loadingPosition==="end"?u:j,l.loadingPosition==="end"?j:u]}))}),fe=be;var E={},je=K;Object.defineProperty(E,"__esModule",{value:!0});var T=E.default=void 0,ye=je(J()),Ne=e,ve=(0,ye.default)((0,Ne.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");T=E.default=ve;function Ce(){const[a,t]=m.useState(!1);function n(){t(!0)}return e.jsx("div",{children:e.jsx(ee,{sx:{"& > button":{mt:2,fontSize:"16px",fontWeight:"bold",width:"100%",p:"10px",backgroundColor:"#3D9BFF"}},children:e.jsx(fe,{type:"submit",size:"small",onClick:n,endIcon:e.jsx(T,{}),loading:a,loadingPosition:"end",variant:"contained",children:e.jsx("span",{children:"Confirm Order"})})})})}const Pe=()=>{var B,S,$,_;const a=w(s=>s.site.data),t=(B=w(s=>s.auth.user))==null?void 0:B.user,{carts:n}=w(s=>s.cart),o=t==null?void 0:t.address,u=m.useRef(!1),[i,f]=m.useState(null),[d,p]=m.useState(!1),[g,h]=m.useState("");m.useEffect(()=>{var s,x;(o==null?void 0:o.length)>0&&f(o[0]),(x=(s=t==null?void 0:t.cart)==null?void 0:s.isCouponApplied)!=null&&x.code?h("Your coupon is applied"):h("")},[t]);const b=te(),{values:r,handleSubmit:N,handleChange:l,resetForm:v}=ae({initialValues:{name:t==null?void 0:t.name,email:t==null?void 0:t.email,mobile:t==null?void 0:t.mobile,adr:"",city:"",pincode:"",state:"",gstNo:t==null?void 0:t.gstNo},onSubmit:s=>{b(se({address:s})).then(F).then(()=>{b(M()),v(),p(!d)})}}),[j,z]=m.useState(""),W=s=>{s.preventDefault(),b(re({code:j})).then(F).then(()=>{u.current.style.border="2px solid green",h("Coupon code is sucessfully applied"),b(M())})};return e.jsx("div",{className:"container",children:e.jsxs("div",{className:"flex flex-row flex-wrap justify-between ",children:[e.jsxs("div",{className:"md:w-[60%] w-full pb-3 md:pr-8",children:[e.jsx("h1",{className:"relative text-4xl font-bold  text-gray-600 ",children:"Secure Checkout"}),e.jsx("p",{className:"text-gray-600 mt-3 text-xl font-semibold",children:"Customer information"}),e.jsx("div",{className:"flex flex-col gap-3 mt-2",children:o==null?void 0:o.map((s,x)=>{const{_id:C,name:P,mobile:k,adr:q,city:D,state:V,pincode:O}=s,R=C===(i==null?void 0:i._id);return e.jsxs("div",{onClick:()=>f(s),className:`flex gap-2 p-3 w-full items-start border ${(i?R:x==0)?"bg-blue-50":"bg-white"} p-2 rounded shadow-sm cursor-pointer`,children:[e.jsx("input",{type:"radio",name:"address",className:"mt-2",checked:i?R:x==0,style:{accentColor:a.primarybg},onChange:()=>f(s)}),e.jsxs("div",{className:"text-gray-600 text-lg font-semibold",children:[e.jsxs("p",{children:[e.jsx("span",{children:P})," ",e.jsx("span",{children:k})]}),e.jsxs("span",{className:"rPNEXT Br27Zz",children:[q,", ",D,",",V," -"," ",e.jsx("span",{className:"",children:O})]})]})]},C)})}),e.jsxs("div",{className:"flex mt-4 justify-between",children:[e.jsx("button",{className:"btn mt-1 text-white",onClick:()=>p(!d),style:{background:a.primarybg},children:"Add New Address"}),d&&e.jsx("button",{className:"btn mt-2 btn-danger text-xl rounded-full flex items-center pb-2 justify-center w-8 h-8",onClick:()=>p(!d),children:"x"})]}),d&&e.jsxs("form",{className:"w-full rounded",onSubmit:N,children:[e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-sm text-gray-00",children:"Name"}),e.jsx("input",{type:"text",name:"name",value:r.name,onChange:l,className:"form-control",placeholder:"Enter Name"})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"mt-3 col-12 col-md-6",children:[e.jsx("label",{className:"block text-sm text-gray-00",children:"Email"}),e.jsx("input",{type:"text",name:"email",value:r.email,onChange:l,className:"form-control",placeholder:"Enter Email"})]}),e.jsxs("div",{className:"mt-3 col-12 col-md-6",children:[e.jsx("label",{className:"block text-sm text-gray-00",children:"Mobile"}),e.jsx("input",{type:"number",name:"mobile",value:r.mobile,onChange:l,className:"form-control",placeholder:"Enter Mobile Number"})]}),e.jsxs("div",{className:"mt-3 col-12",children:[e.jsx("label",{className:"block text-sm text-gray-00",children:"Enter GST No."}),e.jsx("input",{type:"text",name:"gstNo",value:r.gstNo,onChange:l,className:"form-control",placeholder:"Enter GST Number"})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-sm text-gray-600",children:"Adress"}),e.jsx("input",{className:"form-control",type:"text",name:"adr",value:r.adr,onChange:l,placeholder:"Your Adderss"})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"text-sm block text-gray-600",children:"City"}),e.jsx("input",{className:"form-control",type:"text",name:"city",value:r.city,onChange:l,required:!0,placeholder:"Enter your city"})]}),e.jsxs("div",{className:"inline-block mt-3 w-1/2 pr-1",children:[e.jsx("label",{className:"block text-sm text-gray-600",children:"State"}),e.jsx("input",{className:"form-control",type:"text",name:"state",value:r.state,onChange:l,placeholder:"Enter your state",required:!0})]}),e.jsxs("div",{className:"inline-block mt-3 -mx-1 pl-1 w-1/2",children:[e.jsx("label",{className:"block text-sm text-gray-600",children:"Pincode"}),e.jsx("input",{className:"form-control",type:"number",name:"pincode",value:r.pincode,onChange:l,placeholder:"Enter your pincode",required:!0})]}),e.jsx("button",{className:"btn btn-primary text-white mt-4",style:{borderColor:a.primarybg,background:a.primarybg},children:"Add Address"})]})]}),e.jsx("div",{className:"sticky md:w-[40%] w-full",children:e.jsxs("div",{className:" border text-dark p-4 rounded shadow",children:[e.jsx("h2",{className:"font-bold text-xl border-b-2 w-fit text-center  pb-1 mb-3",style:{borderColor:a==null?void 0:a.primarybg},children:"Order summary"}),e.jsx("ul",{className:"space-y-5",children:e.jsx("li",{className:"flex flex-wrap gap-4",children:(S=n.products)==null?void 0:S.map((s,x)=>{const{url:C,name:P,total:k}=s;return e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("img",{src:C,alt:"",className:"max-h-28 w-16"}),e.jsx("p",{className:"font-semibold text-gray-900 mr-4  text-md",children:P})]}),e.jsxs("p",{className:"text-md text-gray-700 font-semibold",children:[I(k)," "]})]},x)})})}),e.jsx("div",{style:{background:a.primarybg},className:"my-4 h-0.5 w-full bg-opacity-30"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 justify-center",children:[e.jsx("input",{className:"border-[2px] w-[76%]  border-gray-500 rounded-md p-2 text-md text-gray-600 font-semibold ",type:"text",ref:u,value:j,onChange:s=>z(s.target.value),onFocus:s=>s.target.style.outline="none",placeholder:"Apply Discount Coupon"}),e.jsx("div",{className:"w-[20%]",children:e.jsx(ne,{onClick:s=>W(s),title:"submit"})}),g&&e.jsx(e.Fragment,{children:e.jsx("p",{className:"mb-0 text-green-600 -mt-2 text-start col-12 ml-3",children:g})})]}),g&&e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("p",{children:"SubTotal:"}),e.jsxs("p",{className:"text-gray-800",children:[I(n.totalCartValue)," "]})]}),g&&e.jsxs("div",{className:"flex justify-between text-md  font-semibold",children:[e.jsx("p",{children:"Coupon Discount:"}),e.jsx("p",{className:"text-green-800",style:{fontWeight:"semibold"},children:I(n.totalCartValue-(($=t==null?void 0:t.cart)==null?void 0:$.totalValue))})]}),e.jsxs("div",{className:"flex justify-between  font-semibold",children:[e.jsx("p",{children:"Total Payable:"}),e.jsxs("p",{className:"text-gray-800",style:{fontWeight:"semibold"},children:[I(((_=t==null?void 0:t.cart)==null?void 0:_.totalValue)||n.totalCartValue)," "]})]})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"mt-10 text-center text-md  font-semibold text-gray-700",children:["By placing this order you agree to the"," ",e.jsx(oe,{to:"/tc",className:"whitespace-nowrap text-red-600 underline hover:red-pink-800",children:"Terms and Conditions"})]}),e.jsxs("form",{action:`${ie}payment/cod`,method:"POST",className:"navButtonss ",children:[e.jsx("input",{type:"hidden",value:n.totalProductPrice,name:"amount"}),e.jsx("input",{type:"hidden",name:"userid",value:localStorage.getItem("token")}),e.jsx("input",{type:"hidden",name:"paymentMEthod",value:"cod"}),e.jsx("input",{type:"hidden",name:"address",value:i==null?void 0:i._id}),i?e.jsx("button",{className:"w-full",type:"submit",children:e.jsx(Ce,{})}):e.jsxs("p",{onClick:()=>le.error("Please Select an address first"),className:"btn btn-outline-primary w-full py-2 mt-2 rounded-none ",children:[" ","confirm Order"]})]})]})]})})]})})};export{Pe as default};
